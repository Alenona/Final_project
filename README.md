# Финальный проект: Анализ результатов A/B-теста для оценки эффективности новой механики оплаты услуг. Функции загрузки доп. информации, подсчёта метрик и построения графиков. Подсчёт метрик через SQL-запросы.
## Анализ результатов A/B-теста для оценки эффективности новой механики оплаты услуг.
### Описание проекта
Имеются данные о посещениях платформы и оплатах в контрольной(А) и тестовой(В) группах. Чтобы понять, стоит ли внедрять новую механику оплаты, можно сравнить следующие метрики: **ARPPU**(средний чек покупателя), **ARPU**(средний чек пользователя) и **CR**(конверсию пользователя в покупателя). Все эти метрики могли поменяться при изменении способа оплаты, ожидаем положительный рост.
При AB-тестировании использовался **bootstrap** и **критерий хи-квадрат**.
### Данные
groups.csv(https://disk.yandex.ru/d/UhyYx41rTt3clQ) – файл с информацией о принадлежности пользователя к контрольной или экспериментальной группе (А – контроль, B – целевая группа) 
groups_add.csv(https://disk.yandex.ru/d/5Kxrz02m3IBUwQ) – дополнительный файл с пользователями, который вам прислали спустя 2 дня после передачи данных
active_studs.csv(https://disk.yandex.ru/d/Tbs44Bm6H_FwFQ) – файл с информацией о пользователях, которые зашли на платформу в дни проведения эксперимента. 
checks.csv(https://disk.yandex.ru/d/pH1q-VqcxXjsVA) – файл с информацией об оплатах пользователей в дни проведения эксперимента. 
### Результаты
Изменения в механизме оплаты привели к увеличению среднего чека покупателя(ARPPU). Новый механизм заставляет покупателя увеличить сумму покупки. Однако средний чек пользователя(ARPU) увеличился незначительно. Поскольку средний чек пользователя и средний чек покупателя связаны формулой ARPU = CR⋅ARPPU, то отсутствие роста ARPU можно объяснить снижением(хоть и незначительным) конверсии пользователя в покупателя(CR). Для увеличения прибыли необходимо, чтобы новый механизм оплаты не только увеличивал сумму покупки, но и количество покупателей.

Тем не менее, ARPPU вырос, остальные показатели не поменялись, значит, можно внедрять новую систему.
## Функции загрузки доп. информации, подсчёта метрик и построения графиков.
Необходимо было написать функцию, которая автоматически подгружает новую информацию и выполняет пересчёт всех нужных метрик. Также нужно было написать функцию, выполняющую построеные графиков по требуемым метрикам.
## Подсчёт метрик через SQL-запросы.
Все необходимые таблицы объединены с помощью JOIN, с помощью WITH сделаны необходимые подзапросы и использован CASE, чтобы посчитать ARPU, ARPAU, CR в покупку, СR активного пользователя в покупку, CR пользователя из активности по математике (subject = ’math’) в покупку курса по математике.